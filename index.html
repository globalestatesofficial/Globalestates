<!DOCTYPE html>
<html>
<head>
<title>GlobalEstate</title>

<style>
body{
font-family:Arial;
background:black;
color:white;
text-align:center;
}
h1{color:#00ffcc;}
.container{
margin-top:40px;
}
input{
padding:12px;
margin:8px;
width:250px;
border-radius:8px;
border:none;
}
button{
padding:15px 25px;
margin:10px;
font-size:18px;
background:#00ffcc;
border:none;
border-radius:10px;
}
.card{
background:#111;
margin:20px;
padding:15px;
border-radius:12px;
}
</style>
</head>

<body>

<h1>üåç GlobalEstate</h1>
<p>Post ‚Ä¢ Buy ‚Ä¢ Rent Properties Worldwide</p>

<div class="container">
<h2>List Your Property</h2>

<input type="text" id="country" placeholder="Country"><br>
<input type="text" id="state" placeholder="State"><br>
<input type="text" id="city" placeholder="City"><br>
<input type="text" id="price" placeholder="Price"><br>
<input type="text" id="contact" placeholder="Contact Number"><br>

<button onclick="addProperty()">POST PROPERTY</button>
</div>

<h2>üåç Live Properties</h2>
<div id="list"></div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
// üîë PASTE YOUR SUPABASE KEYS HERE
const supabaseUrl = "https://okfejpqxwhykjixczwht.supabase.co";
const supabaseKey = "sb_publishable_veIDD7EudrA_OWGF-Jz83g_oXwJpvJA";

const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);


// üöÄ POST PROPERTY
async function addProperty() {

const country = document.getElementById("country").value;
const state = document.getElementById("state").value;
const city = document.getElementById("city").value;
const price = document.getElementById("price").value;
const contact = document.getElementById("contact").value;

if(!country || !city){
alert("Fill all fields");
return;
}

const { error } = await supabase
.from("Properties")   // table name EXACT
.insert([
{
country: country,
state: state,
city: city,
price: price,
contact: contact
}
]);

if(error){
alert("‚ùå Error posting");
console.log(error);
}else{
alert("‚úÖ Property Posted Successfully");
loadProperties();
}
}


// üì° LOAD PROPERTIES FROM DATABASE
async function loadProperties(){

const { data, error } = await supabase
.from("Properties")
.select("*")
.order("id",{ascending:false});

if(data){
let html="";

data.forEach(p=>{
html += `
<div class="card">
<h3>${p.city}, ${p.state}, ${p.country}</h3>
<p>Price: ${p.price}</p>
<p>Contact: ${p.contact}</p>
</div>
`;
});

document.getElementById("list").innerHTML = html;
}
}

// auto load
loadProperties();

</script>
</body>
</html>
